{{ form_start(form) }}

{#<table>#}
{#    <tr>#}
{#        <td>{{ form_label(form.platforms, 'Platforms', {'label_attr': {'class': 'SuiteExecutionSearchFormLabel', 'style' : 'width:120px;'}}) }}</td>#}
{#        <td>{{ form_errors(form.platforms) }}</td>#}
{#        <td>{{ form_widget(form.platforms) }}</td>#}
{#        #}{#            , {'attr': {'class': 'suiteExSearchSelection suiteExecutionSearchTestingLevelSelection'}}) }}#}
{#    </tr>#}
{#    <tr>#}
{#        <td>{{ form_label(form.chips, 'Chip/s', {'label_attr': {'class': 'SuiteExecutionSearchFormLabel', 'style' : 'width:120px;'}}) }}</td>#}
{#        <td>{{ form_errors(form.chips) }}</td>#}
{#        <td>{{ form_widget(form.chips)  }}</td>#}
{#    </tr>#}
{#    <tr>#}
{#        <td>{{ form_label(form.components, 'Components', {'label_attr': {'class': 'SuiteExecutionSearchFormLabel', 'style' : 'width:120px;'}}) }}</td>#}
{#        <td>{{ form_errors(form.components) }}</td>#}
{#        <td>{{ form_widget(form.components) }}</td>#}
{#    </tr>#}
{#    <tr>#}
{#        <td>{{ form_label(form.mode, 'Package Mode', {'label_attr': {'class': 'SuiteExecutionSearchFormLabel', 'style' : 'width:120px;'}}) }}</td>#}
{#        <td>{{ form_errors(form.mode) }}</td>#}
{#        <td>{{ form_widget(form.mode) }}</td>#}
{#    </tr>#}


{#</table>#}


<div class="row">
    <div class="col-sm-12">

        <h4 class="header green">Markdown Editor</h4>

        <div class="widget-box widget-color-blue">
            <div class="widget-header widget-header-small">  </div>

            <div class="widget-body">
                <div class="widget-main no-padding">
{#				<textarea name="content" data-provide="markdown" data-iconlibrary="fa" rows="10">{{ form_widget(form.reportNotes) }}</textarea>#}
				<textarea name="reportNotes" data-provide="markdown" data-iconlibrary="fa" rows="10">{{ log_book_cycle_report.reportNotes  }}</textarea>
                </div>

                <div class="widget-toolbox padding-4 clearfix">
                    <div class="btn-group pull-left">
                        <button class="btn btn-sm btn-info">
                            <i class="ace-icon fa fa-times bigger-125"></i>
                            Cancel
                        </button>
                    </div>

                    <div class="btn-group pull-right">
                        <button class="btn btn-sm btn-purple">
                            <i class="ace-icon fa fa-floppy-o bigger-125"></i>
                            Save
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    {#        <h4 class="header green">Markdown Editor</h4>#}

{#        <div class="widget-box widget-color-blue">#}
{#            <div class="widget-header widget-header-small">  </div>#}

{#            <div class="widget-body">#}
{#                <div class="widget-main no-padding">#}
{#                    <div class="md-editor active" id="1601797100242">#}
{#                        <div class="md-header btn-toolbar">#}
{#                            <div class="btn-group">#}
{#                                <button class="btn-default btn-sm btn btn-white" type="button" title="Bold (Ctrl+B)" tabindex="-1" data-provider="bootstrap-markdown" data-handler="bootstrap-markdown-cmdBold" data-hotkey="Ctrl+B"><span class="fa fa-bold"></span> </button>#}
{#                                <button class="btn-default btn-sm btn btn-white" type="button" title="Italic (Ctrl+I)" tabindex="-1" data-provider="bootstrap-markdown" data-handler="bootstrap-markdown-cmdItalic" data-hotkey="Ctrl+I"><span class="fa fa-italic"></span> </button>#}
{#                                <button class="btn-default btn-sm btn btn-white" type="button" title="Heading (Ctrl+H)" tabindex="-1" data-provider="bootstrap-markdown" data-handler="bootstrap-markdown-cmdHeading" data-hotkey="Ctrl+H"><span class="fa fa-header"></span> </button>#}
{#                            </div>#}
{#                            <div class="btn-group">#}
{#                                <button class="btn-default btn-sm btn btn-white" type="button" title="URL/Link (Ctrl+L)" tabindex="-1" data-provider="bootstrap-markdown" data-handler="bootstrap-markdown-cmdUrl" data-hotkey="Ctrl+L"><span class="fa fa-link"></span> </button>#}
{#                                <button class="btn-default btn-sm btn btn-white" type="button" title="Image (Ctrl+G)" tabindex="-1" data-provider="bootstrap-markdown" data-handler="bootstrap-markdown-cmdImage" data-hotkey="Ctrl+G"><span class="fa fa-picture-o"></span> </button>#}
{#                            </div><div class="btn-group">#}
{#                                <button class="btn-default btn-sm btn btn-white" type="button" title="Unordered List (Ctrl+U)" tabindex="-1" data-provider="bootstrap-markdown" data-handler="bootstrap-markdown-cmdList" data-hotkey="Ctrl+U"><span class="fa fa-list"></span> </button>#}
{#                                <button class="btn-default btn-sm btn btn-white" type="button" title="Ordered List (Ctrl+O)" tabindex="-1" data-provider="bootstrap-markdown" data-handler="bootstrap-markdown-cmdListO" data-hotkey="Ctrl+O"><span class="fa fa-list-ol"></span> </button>#}
{#                                <button class="btn-default btn-sm btn btn-white" type="button" title="Code (Ctrl+K)" tabindex="-1" data-provider="bootstrap-markdown" data-handler="bootstrap-markdown-cmdCode" data-hotkey="Ctrl+K"><span class="fa fa-code"></span> </button>#}
{#                                <button class="btn-default btn-sm btn btn-white" type="button" title="Quote (Ctrl+Q)" tabindex="-1" data-provider="bootstrap-markdown" data-handler="bootstrap-markdown-cmdQuote" data-hotkey="Ctrl+Q"><span class="fa fa-quote-left"></span> </button>#}
{#                            </div>#}
{#                            <div class="btn-group">#}
{#                                <button class="btn-sm btn btn-primary btn-white" type="button" title="Preview (Ctrl+P)" tabindex="-1" data-provider="bootstrap-markdown" data-handler="bootstrap-markdown-cmdPreview" data-hotkey="Ctrl+P" data-toggle="button" aria-pressed="false"><span class="fa fa-search"></span> Preview</button>#}
{#                            </div>#}
{#                            <div class="md-controls"><a class="md-control md-control-fullscreen" href="#"><span class="fa fa-expand"></span></a></div>#}
{#                        </div>#}
{#                            <textarea name="content" data-provide="markdown" data-iconlibrary="fa" rows="10" class="md-input" style="resize: none; display: block;">{{ form_widget(form.reportNotes) }}</textarea>#}
{#                            <textarea name="content" data-provide="markdown" data-iconlibrary="fa" rows="10" class="md-input" style="resize: none; display: block;">{{ log_book_cycle_report.reportNotes }}</textarea>#}
{#                        <div class="md-fullscreen-controls"><a href="#" class="exit-fullscreen" title="Exit fullscreen"><span class="fa fa-compress"></span></a></div><div class="md-fullscreen-controls"><a href="#" class="exit-fullscreen" title="Exit fullscreen"><span class="fa fa-compress"></span></a></div></div>#}
{#                </div>#}

{#                <div class="widget-toolbox padding-4 clearfix">#}
{#                    <div class="btn-group pull-left">#}
{#                        <button class="btn btn-sm btn-info">#}
{#                            <i class="ace-icon fa fa-times bigger-125"></i>#}
{#                            Cancel#}
{#                        </button>#}
{#                    </div>#}

{#                    <div class="btn-group pull-right">#}
{#                        <button class="btn btn-sm btn-purple">#}
{#                            <i class="ace-icon fa fa-floppy-o bigger-125"></i>#}
{#                            Save#}
{#                        </button>#}
{#                    </div>#}
{#                </div>#}
{#            </div>#}
{#        </div>#}
    </div>
</div>
    {{ form_widget(form) }}
    <button class="btn">{{ button_label|default('Save') }}</button>
{{ form_end(form) }}
<script>
    $(document).ready(function() {
        $( "#log_book_cycle_report form" ).css( "width", "1000px" );
        $( "#log_book_cycle_report input[type = 'text']" ).css( "width", "900px" );
        $( "#log_book_cycle_report select" ).css( "width", "900px" );
        $( "#log_book_cycle_report textarea" ).css( "width", "900px" );
        $( "#log_book_cycle_report label" ).css( "width", "150px" );

        ConvertExternal();

    });
</script>

<script src="{{ asset('assets/js/jquery-ui.custom.min.js') }}"></script>
<script src="{{ asset('assets/js/jquery.ui.touch-punch.min.js') }}"></script>
<script src="{{ asset('assets/js/markdown.min.js') }}"></script>
<script src="{{ asset('assets/js/bootstrap-markdown.min.js') }}"></script>
{#<script src="{{ asset('assets/js/jquery.hotkeys.index.min.js') }}"></script>#}
<script src="{{ asset('assets/js/bootstrap-wysiwyg.min.js') }}"></script>
{#<script src="{{ asset('assets/js/bootbox.js') }}"></script>#}


<!-- inline scripts related to this page -->
<script type="text/javascript">
    jQuery(function($){

        $('textarea[data-provide="markdown"]').each(function(){
            var $this = $(this);

            if ($this.data('markdown')) {
                $this.data('markdown').showEditor();
            }
            else $this.markdown()

            $this.parent().find('.btn').addClass('btn-white');
        })



        function showErrorAlert (reason, detail) {
            var msg='';
            if (reason==='unsupported-file-type') { msg = "Unsupported format " +detail; }
            else {
                //console.log("error uploading file", reason, detail);
            }
            $('<div class="alert"> <button type="button" class="close" data-dismiss="alert">&times;</button>'+
                '<strong>File upload error</strong> '+msg+' </div>').prependTo('#alerts');
        }

        //$('#editor1').ace_wysiwyg();//this will create the default editor will all buttons

        //but we want to change a few buttons colors for the third style
        $('#editor1').ace_wysiwyg({
            toolbar:
                [
                    'font',
                    null,
                    'fontSize',
                    null,
                    {name:'bold', className:'btn-info'},
                    {name:'italic', className:'btn-info'},
                    {name:'strikethrough', className:'btn-info'},
                    {name:'underline', className:'btn-info'},
                    null,
                    {name:'insertunorderedlist', className:'btn-success'},
                    {name:'insertorderedlist', className:'btn-success'},
                    {name:'outdent', className:'btn-purple'},
                    {name:'indent', className:'btn-purple'},
                    null,
                    {name:'justifyleft', className:'btn-primary'},
                    {name:'justifycenter', className:'btn-primary'},
                    {name:'justifyright', className:'btn-primary'},
                    {name:'justifyfull', className:'btn-inverse'},
                    null,
                    {name:'createLink', className:'btn-pink'},
                    {name:'unlink', className:'btn-pink'},
                    null,
                    {name:'insertImage', className:'btn-success'},
                    null,
                    'foreColor',
                    null,
                    {name:'undo', className:'btn-grey'},
                    {name:'redo', className:'btn-grey'}
                ],
            'wysiwyg': {
                fileUploadError: showErrorAlert
            }
        }).prev().addClass('wysiwyg-style2');


        /**
         //make the editor have all the available height
         $(window).on('resize.editor', function() {
		var offset = $('#editor1').parent().offset();
		var winHeight =  $(this).height();

		$('#editor1').css({'height':winHeight - offset.top - 10, 'max-height': 'none'});
	}).triggerHandler('resize.editor');
         */


        $('#editor2').css({'height':'200px'}).ace_wysiwyg({
            toolbar_place: function(toolbar) {
                return $(this).closest('.widget-box')
                    .find('.widget-header').prepend(toolbar)
                    .find('.wysiwyg-toolbar').addClass('inline');
            },
            toolbar:
                [
                    'bold',
                    {name:'italic' , title:'Change Title!', icon: 'ace-icon fa fa-leaf'},
                    'strikethrough',
                    null,
                    'insertunorderedlist',
                    'insertorderedlist',
                    null,
                    'justifyleft',
                    'justifycenter',
                    'justifyright'
                ],
            speech_button: false
        });




        $('[data-toggle="buttons"] .btn').on('click', function(e){
            var target = $(this).find('input[type=radio]');
            var which = parseInt(target.val());
            var toolbar = $('#editor1').prev().get(0);
            if(which >= 1 && which <= 4) {
                toolbar.className = toolbar.className.replace(/wysiwyg\-style(1|2)/g , '');
                if(which == 1) $(toolbar).addClass('wysiwyg-style1');
                else if(which == 2) $(toolbar).addClass('wysiwyg-style2');
                if(which == 4) {
                    $(toolbar).find('.btn-group > .btn').addClass('btn-white btn-round');
                } else $(toolbar).find('.btn-group > .btn-white').removeClass('btn-white btn-round');
            }
        });




        //RESIZE IMAGE

        //Add Image Resize Functionality to Chrome and Safari
        //webkit browsers don't have image resize functionality when content is editable
        //so let's add something using jQuery UI resizable
        //another option would be opening a dialog for user to enter dimensions.
        if ( typeof jQuery.ui !== 'undefined' && ace.vars['webkit'] ) {

            var lastResizableImg = null;
            function destroyResizable() {
                if(lastResizableImg == null) return;
                lastResizableImg.resizable( "destroy" );
                lastResizableImg.removeData('resizable');
                lastResizableImg = null;
            }

            var enableImageResize = function() {
                $('.wysiwyg-editor')
                    .on('mousedown', function(e) {
                        var target = $(e.target);
                        if( e.target instanceof HTMLImageElement ) {
                            if( !target.data('resizable') ) {
                                target.resizable({
                                    aspectRatio: e.target.width / e.target.height,
                                });
                                target.data('resizable', true);

                                if( lastResizableImg != null ) {
                                    //disable previous resizable image
                                    lastResizableImg.resizable( "destroy" );
                                    lastResizableImg.removeData('resizable');
                                }
                                lastResizableImg = target;
                            }
                        }
                    })
                    .on('click', function(e) {
                        if( lastResizableImg != null && !(e.target instanceof HTMLImageElement) ) {
                            destroyResizable();
                        }
                    })
                    .on('keydown', function() {
                        destroyResizable();
                    });
            }

            enableImageResize();

            /**
             //or we can load the jQuery UI dynamically only if needed
             if (typeof jQuery.ui !== 'undefined') enableImageResize();
             else {//load jQuery UI if not loaded
			//in Ace demo ./components will be replaced by correct components path
			$.getScript("assets/js/jquery-ui.custom.min.js", function(data, textStatus, jqxhr) {
				enableImageResize()
			});
		}
             */
        }


    });
</script>
